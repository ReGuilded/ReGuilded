(()=>{"use strict";var e={537:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(645),n=r.n(i)()((function(e){return e[1]}));n.push([e.id,".GifPickerModal{padding:0 !important;max-height:80vh;width:900px;max-width:90vw !important}.GifPickerInner{padding:10px;border-radius:4px;overflow:hidden;display:flex;flex-direction:column}.GifPickerInner .Header{display:flex;align-items:center;justify-content:center;height:35px;margin:-10px;margin-bottom:12px;position:relative;flex-shrink:0}.GifPickerInner .Header .Title{font-size:1.1em;font-weight:bolder}.GifPickerInner .Header .Button{width:20px;height:20px;position:absolute;right:10px;cursor:pointer}.GifPickerInner .Header .Button:Hover{color:#f77}.GifPickerInner .SearchBar{outline:none;background-color:#31333c;border:1px solid rgba(163,163,172,.2);border-radius:4px;padding:10px}.GifPickerInner .SearchBar::Placeholder{color:#fff;opacity:.5}.GifPickerInner .ItemsContainer{padding:5px;max-height:calc(100% - 80px);flex-shrink:0;flex-grow:1}.GifPickerInner .Items{columns:6 200px}.GifPickerInner .TenorGifItem{cursor:pointer;margin-bottom:20px}.GifPickerInner .TenorGifItem img{width:200px;max-height:270px;object-fit:cover;border-radius:4px;border:1px solid rgba(163,163,172,.2)}.GifPickerInner .CategoryTitle{font-size:1.2em;font-weight:bolder;margin-top:20px;margin-bottom:10px}",""]);const a=n},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(n[c]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);i&&n[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),t.push(s))}},t}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{r.r(i),r.d(i,{default:()=>g});class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this.id=""}__init2(){this.name=""}preinit(e,t){}init(e,t,r){}uninit(){}handleError(...e){console.error(`%c${this.id}`,"color:white",...e)}}var t=r(537);const n=self.ReGuilded.addonLib,a={media_filter:"minimal",limit:50};let c=0;const l=new class{async executRequest(e,t={}){for(;performance.now()-c<500;)await new Promise((e=>setTimeout(e,100)));return c=performance.now(),await fetch(`https://g.tenor.com/v1/${e}?key=NVIY5F53SLFQ${Object.entries({...a,...t}).map((([e,t])=>`&${e}=${t}`)).join("")}`).then((e=>e.json())).catch(console.error)}getTrending(e={}){return this.executRequest("trending",e)}search(e,t={}){return this.executRequest("search",{q:e,...t})}},s=self.ReGuilded.addonLib.ModalStack;var o=r.n(s);const m="D:\\MEGA\\Shared\\Node Projects\\reguilded-addon-sdk\\src\\GifPicker\\modal.js";function d({media:e}){const t={onClick:t=>{const r=[...document.getElementsByClassName("SlateEditor-editor")].find((e=>null!==e.offsetParent));(0,n.getOwnerInstance)(r).props.editor.insertBlock({type:"video",data:{src:e[0].mp4.url}}),!t.shiftKey&&o().pop()}};return n.React.createElement("div",{className:"TenorGifItem",...t,__self:this,__source:{fileName:m,lineNumber:20}},n.React.createElement("img",{src:e[0].tinygif.url,alt:"gif",__self:this,__source:{fileName:m,lineNumber:21}}))}let u;function f(){const[e,t]=n.React.useState(""),[r,i]=n.React.useState([]),[a,c]=n.React.useState([]),[s,f]=n.React.useState(0),[_,h]=n.React.useState(!1),p=n.React.useRef();n.React.useEffect((()=>{l.getTrending().then((({results:e,next:t})=>(c(e),f(t)))),p.current&&p.current.focus()}),[]);const N={handleScroll:({currentTarget:t})=>{t.scrollTop+t.getBoundingClientRect().height<t.scrollHeight-100||_||(h(!0),e.trim().length?l.search(e,{pos:s}).then((({results:e,next:t})=>(h(!1),i([...r,...e]),f(t)))):l.getTrending({pos:s}).then((({results:e,next:t})=>(h(!1),c([...a,...e]),f(t)))))},handleSearch:({currentTarget:{value:e}})=>{clearTimeout(u),u=setTimeout((()=>{t(e),l.search(e).then((({results:e,next:t})=>(i(e),f(t))))}),250)}};return n.React.createElement("div",{className:"Modal GifPickerModal ModalV2-container ModalV2-container-has-header",__self:this,__source:{fileName:m,lineNumber:83}},n.React.createElement("div",{className:"ModalHeaderV2-container",__self:this,__source:{fileName:m,lineNumber:84}},n.React.createElement("div",{className:"ModalHeaderV2-header-wrapper",__self:this,__source:{fileName:m,lineNumber:85}},n.React.createElement("div",{className:"ModalHeaderV2-header",__self:this,__source:{fileName:m,lineNumber:86}},"GIFs, powered by Tenor")),n.React.createElement("div",{className:"SVGIcon-container ModalV2CloseButton-container",__self:this,__source:{fileName:m,lineNumber:88}},n.React.createElement("svg",{className:"icon SVGIcon-icon icon-cross-2 Button Close",onClick:o().pop.bind(o()),viewBox:"0 0 352 512",__self:this,__source:{fileName:m,lineNumber:89}},n.React.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",__self:this,__source:{fileName:m,lineNumber:91}})))),n.React.createElement("div",{className:"StatusContext-container ModalV2-modal-content ModalV2-modal-content-scrollable",style:{padding:0},onScroll:N.handleScroll,__self:this,__source:{fileName:m,lineNumber:95}},n.React.createElement("div",{className:"GifPickerInner",__self:this,__source:{fileName:m,lineNumber:97}},n.React.createElement("input",{className:"SearchBar",ref:p,onChange:N.handleSearch,placeholder:"Search Tenor...",__self:this,__source:{fileName:m,lineNumber:98}}),n.React.createElement("div",{className:"ItemsContainer",__self:this,__source:{fileName:m,lineNumber:103}},e.trim().length?n.React.createElement(n.React.Fragment,{__self:this,__source:{fileName:m,lineNumber:105}},n.React.createElement("div",{className:"CategoryTitle",__self:this,__source:{fileName:m,lineNumber:106}},"Results"),n.React.createElement("div",{className:"Items",__self:this,__source:{fileName:m,lineNumber:108}},r.map(((e,t)=>n.React.createElement(d,{key:t,...e,__self:this,__source:{fileName:m,lineNumber:109}}))))):n.React.createElement(n.React.Fragment,{__self:this,__source:{fileName:m,lineNumber:113}},n.React.createElement("div",{className:"CategoryTitle",__self:this,__source:{fileName:m,lineNumber:114}},"Trending"),n.React.createElement("div",{className:"Items",__self:this,__source:{fileName:m,lineNumber:116}},a.map(((e,t)=>n.React.createElement(d,{key:t,...e,__self:this,__source:{fileName:m,lineNumber:117}})))))))))}const _=self.ReGuilded.addonLib.patcher,h="D:\\MEGA\\Shared\\Node Projects\\reguilded-addon-sdk\\src\\GifPicker\\index.js";var p;function N(){return n.React.createElement("div",{className:"TransientMenuTrigger-container TransientMenuTrigger-container-desktop GifPickerButton",onClick:o().push.bind(o(),n.React.createElement(f,{__self:this,__source:{fileName:h,lineNumber:13}})),__self:this,__source:{fileName:h,lineNumber:12}},n.React.createElement("span",{className:"TransientMenuTrigger-children",__self:this,__source:{fileName:h,lineNumber:14}},n.React.createElement("div",{className:"ReactionPickerButton-container ReactionsControlV2-picker SlateEditor-reactions-control",__self:this,__source:{fileName:h,lineNumber:15}},n.React.createElement("div",{className:"SVGIcon-container ReactionPickerButton-icon",__self:this,__source:{fileName:h,lineNumber:16}},n.React.createElement("svg",{className:"icon SVGIcon-icon icon-toolbar-emoji",viewBox:"0 0 512 512",width:24,height:24,__self:this,__source:{fileName:h,lineNumber:17}},n.React.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z",__self:this,__source:{fileName:h,lineNumber:18}}))))))}const g=new(p=class extends e{constructor(...e){super(...e),p.prototype.__init.call(this),p.prototype.__init2.call(this)}__init(){this.id="GifPicker"}__init2(){this.name="Gif Picker"}init(e,r,i){(0,n.patchElementRenderer)(".ChatChannelInput-container .ReactionsControlV2-container.SlateEditor-reactions-control-wrapper",this.id,"after",this.renderButton.bind(this)).catch(this.handleError.bind(this,"Failed to patch button renderer!")),this.styles=(0,n.loadStyles)(this.name,t.Z),window.addEventListener("keydown",this.keybindListener=e=>e.ctrlKey&&"g"===e.key&&o().push(n.React.createElement(f,{__self:this,__source:{fileName:h,lineNumber:47}})))}renderButton({props:e},t,r){if("SlateEditor-reactions-control-wrapper"===e.wrapperClassName)return n.React.createElement("div",{style:{display:"flex"},__self:this,__source:{fileName:h,lineNumber:57}},n.React.createElement(N,{__self:this,__source:{fileName:h,lineNumber:58}}),r(e))}uninit(){(0,_.unpatchAll)(this.id),this.styles.destroy(),window.removeEventListener("keydown",this.keybindListener)}})})(),module.exports=i})();